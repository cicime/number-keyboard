!function(){"use strict";var a=function(a){var e=this,t=this.html(),n=$(a)[0],o="touchend click",d=function(a){a.preventDefault(),a.stopPropagation()},r=function(a){d(a),h(n.value),$(".keyboard-hk").show(),$(".keyboard-txt-hod").hide()},l=function(a){d(a),n.value+=a.data.txt,!/^\d+\.?\d{0,2}$/.test(n.value)&&s(a),h(n.value)},s=function(a){d(a),n.value&&(n.value=n.value.replace(/.$/,"")),h(n.value)},h=function(a){$(".keyboard-txt-hk").html(a||""),!$(".keyboard-flash").length&&e.append('<span class="keyboard-flash">|</span>'),e.trigger("kb.tap")},u=function(){return $(".keyboard-flash").remove()};return function(){for(var a=[[1,2,3],[4,5,6],[7,8,9],[0,".","back"]],n=$('<div class="keyboard keyboard-hk" hidden></div>'),d=$('<table class="keyboard-table"></table>'),r=0;r<a.length;r++){for(var h=$("<tr></tr>"),u=0;u<a[r].length;u++){var c=a[r][u],k=$('<td class="keyboard-key">'+c+"</td>");"back"===c?k.on(o,s):k.on(o,{txt:c},l),h.append(k)}d.append(h)}n.append(d),$("body").append(n),e.html(""),e.append('<span class="keyboard-txt-hk"></span>'),e.append('<span class="keyboard-txt-hod">'+t+"</span>")}(),e.on(o,r),$(document).on(o,function(){u(),$(".keyboard-hk").hide(),!n.value&&$(".keyboard-txt-hod").show()}),this};$(function(){$.fn.extend({keyboard:a})})}();
